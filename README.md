# CXRForeignViewer by Headliners

Данное решение было разработано командой `Headliners` в рамках челленджа `Будущее медицины`. Оно основано на модели Yolo v8s и предназначено для детекции инородных тел на рентгеновских снимках грудной клетки (Chest XRays, CXR).

## Содержание

1. [Как запустить программу?](#how_to) \
    1.1. [Подготовка окружения](#virtualenv) \
    1.2. [Запуск скрипта](#script) \
    1.3. [Запуск Notebook](#notebook) \
    1.4. [Автономный запуск Notebook](#autonomous) 

   
## Как запустить программу?

Программа принимает на вход директорию с изображениями в формате `DICOM (.dcm)` и не работает с файлами другого формата. Наличие в директории вложенных папок не влияет на работу программы.


### Подготовка окружения

Для запуска программы Вам понадобится Python 3. Перед запуском создайте виртуальное окружение:

    virtualenv venv

и активируйте его командой

    source venv/bin/activate 

для Unix-систем, или командой 

    source venv/Scripts/activate

для некоторых систем на базе Windows. 

Убедитесь, что вы находитесь в виртуальном окружении:

    which python

Затем установите необходимые библиотеки из файла `requirements.txt` командой

    pip install -r requirements.txt

Убедитесь, что библиотеки успешно установлены:

    pip freeze

Теперь ваше окружение готово к запуску программы! Мы предлагаем три способа, как это сделать:


### Запуск скрипта

Самый простой способ - запустить скрипт из файла `main.py` с помощью IDE или команды 

    python main.py

или 

    python3 main.py

для версий Python 3.ХХ

После этого скрипт запустится в консоли и запросит путь к директории, где расположены DICOM файлы, которые Вы хотите обработать. Вывод сообщения-запроса директории может занять несколько секунд. Если поле будет оставлено пустым, программа автоматически запустится на директории с тестовыми файлами `headliners_CXRForeignViewer/demo_files`. Далее скрипт отрабатывает автоматически. 


### Запуск Notebook

Если Вам удобнее запускать файл формата Jupiter Notebook (.ipynb), мы предлагаем два варианта, как это сделать. Если Вы полностью склонировали репозиторий с библиотекой и у Вас есть доступ к её функциям, то запуск может быть осуществлен через `detect.ipynb`. Если Вы запускаете Notebook в среде, где подключение кастомной библиотеки затруднено или невозможно, то см. следующий пункт. 

Для работы `detect.ipynb` нужно просто запустить последовательно все ячейки блокнота. Никаких дополнительных действий не требуется. 


### Автономный запуск Notebook

Если в среде, где вы запускаете программу, затруднено или невозможно подключение кастомной библиотеки `headliners_CXRForeignViewer`, (например, Google Colab) Вы можете запустить блокнот `detect_autonomous.ipynb`, который уже содержит в себе все функции, необходимые для запуска. 

Просто запустите последовательно все ячейки блокнота. 